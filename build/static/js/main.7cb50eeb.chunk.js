(this.webpackJsonpquestions=this.webpackJsonpquestions||[]).push([[0],{113:function(e,t){},122:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(60),c=n.n(o),s=n(26),i=(n(70),n(3)),l=n(4),u=n(6),m=n(5),p=n(1),d=n(17),h=n(64),f=n(11),v=n.n(f),b=n(15),y=n(20),j=n.n(y),g=n(61),E=n.n(g),k=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).url="localhost:3000",e.copyToClipboard=function(){var t=document.createElement("input");document.body.appendChild(t),t.value=e.url+"/events/"+e.props.eventId,t.select(),document.execCommand("copy"),document.body.removeChild(t)},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("button",{style:{marginBottom:"20px"},className:"btn btn-primary",onClick:this.copyToClipboard},"Link f\xfcr Teilnehmer kopieren")}}]),n}(a.Component),w=n(18),O=n(62),q=n(28),x=n.n(q),S=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={question:{question:""},errors:{}},e.schema={question:x.a.string().min(3).max(512).required().label("Question")},e.joiSchema=x.a.object(e.schema),e.validate=function(){var t=e.joiSchema.validate(e.state.question,{abortEarly:!1});if(!t.error)return null;var n,a={},r=Object(O.a)(t.error.details);try{for(r.s();!(n=r.n()).done;){var o=n.value;a[o.path[0]]=o.message}}catch(c){r.e(c)}finally{r.f()}return a},e.validateProperty=function(t){var n=t.name,a=t.value,r=Object(w.a)({},n,a),o=Object(w.a)({},n,e.schema[n]),c=x.a.object(o).validate(r).error;return c?c.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),n||e.callServer()},e.callServer=function(){var t=e.state.question.question;e.props.onSubmit(t),e.setState({question:{question:""}})},e.handleChange=function(t){var n=t.currentTarget,a=Object(d.a)({},e.state.errors),r=e.validateProperty(n);r?a[n.name]=r:delete a[n.name];var o=Object(d.a)({},e.state.question);o[n.name]=n.value,e.setState({question:o,errors:a})},e}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{value:this.state.question.question,onChange:this.handleChange,type:"text",className:"form-control",name:"question",id:"frage","aria-describedby":"frageHilfe"}),this.state.errors.question&&r.a.createElement("div",{className:"alert alert-danger"},this.state.errors.question)),r.a.createElement("span",{className:"float left"},"Stell uns deine Frage"),r.a.createElement("button",{disabled:this.validate(),type:"submit",className:"btn btn-primary float-right",style:{width:"150px"}},"Senden"))))}}]),n}(a.Component),C=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderIconLike=function(e){return localStorage.getItem("vote-"+e.id)?r.a.createElement("i",{className:"fa fa-heart"}):r.a.createElement("i",{className:"fa fa-heart-o"})},e.renderIconDelte=function(t){return localStorage.getItem("creator-"+t.id)&&0===t.answered||e.props.creator?r.a.createElement("i",{className:"fa fa-trash"}):""},e.renderIconAnswered=function(t){return e.props.creator?r.a.createElement("i",{className:"fa fa-check"}):""},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.onVote,a=e.onDelete,o=e.onAnswered,c=t.answered?"card text-white bg-success":"card";return r.a.createElement("div",{className:c},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",null,t.question),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",{onClick:function(){return n(t)},style:{cursor:"pointer"},title:"Vote","data-placement":"top","data-toggle":"tooltip"},this.renderIconLike(t)," ",t.votes),r.a.createElement("span",{onClick:function(){return a(t)},style:{cursor:"pointer",marginLeft:"20px"},title:"Delete","data-placement":"top"},this.renderIconDelte(t)),r.a.createElement("span",{onClick:function(){return o(t)},style:{cursor:"pointer",marginLeft:"20px"},title:"Mark as answered","data-placement":"top"},this.renderIconAnswered(t)))))}}]),n}(a.Component),A=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.questions,n=e.onVote,a=e.onDelete,o=e.creator,c=e.onAnswered;return t.map((function(e){return r.a.createElement(C,{key:e.id,data:e,onVote:n,onDelete:a,creator:o,onAnswered:c})}))}}]),n}(a.Component),I=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer",style:{marginTop:"50px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("a",{href:"https://www.hs-pforzheim.de/kontakt/impressum"},"Impressum")))}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={questions:[],creator:!1},e.urlApi="https://api.originjump.com",e.newQuestion=function(){var t=Object(b.a)(v.a.mark((function t(n){var a,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.match.params.id,r={question:n,event_id:a},e.socket.emit("newQuestion",r),e.socket.on("newQuestionResult",(function(e){console.log(e),localStorage.setItem("creator-"+e.insertId,!0)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.voteQuestion=function(){var t=Object(b.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.put(e.urlApi+"/questions/"+n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleVote=function(t){if(!localStorage.getItem("vote-"+t.id)){var n=Object(h.a)(e.state.questions),a=n.indexOf(t);(t=Object(d.a)({},n[a])).votes++,n[a]=t,e.setState({questions:n}),localStorage.setItem("vote-"+t.id,!0),e.socket.emit("vote",t)}},e.handleDelete=function(t){e.socket.emit("delete",t)},e.handleAnswered=function(t){e.socket.emit("answered",t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,n,a=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.match.params.id,!this.props.match.params.key){e.next=7;break}return e.next=4,j.a.get(this.urlApi+"/events/"+t);case 4:n=e.sent,console.log(n),n.data[0]&&n.data[0].creator_key===this.props.match.params.key&&this.setState({creator:!0});case 7:this.socket=E()(this.urlApi),this.socket.emit("join",{id:t},(function(e){e.sort((function(e,t){return t.votes-e.votes})),a.setState({questions:e})})),this.socket.on("questions",(function(e){e.sort((function(e,t){return e.answered-t.answered||t.votes-e.votes})),a.setState({questions:e})}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.socket.emit("disconnect"),this.socket.off()}},{key:"render",value:function(){var e=this.state.questions,t=this.state.creator?r.a.createElement(k,{eventId:this.props.match.params.id}):"";return r.a.createElement("div",{className:"App"},t,r.a.createElement(S,{onSubmit:this.newQuestion}),r.a.createElement(A,{questions:e,onVote:this.handleVote,onDelete:this.handleDelete,creator:this.state.creator,onAnswered:this.handleAnswered}),r.a.createElement(I,null))}}]),n}(a.Component),D=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{margin:"20px"}},"Not Found"))}}]),n}(a.Component),V=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={redirect:""},e.urlApi="https://api.originjump.com",e.sub="",e.handleNewEvent=Object(b.a)(v.a.mark((function t(){var n,a,r,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.generateId(),a=e.generateId(),r={id:n,creator_key:a},t.next=5,j.a.post(e.urlApi+"/events",r);case 5:o=t.sent,console.log(o),2===o.data.serverStatus?e.setState({redirect:e.sub+"/events/"+n+"/"+a}):console.log("Event konnte nicht erstellt werden.");case 8:case"end":return t.stop()}}),t)}))),e.generateId=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,a=0;a<24;a++)e+=t.charAt(Math.floor(Math.random()*n));return e},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.redirect;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("button",{style:{width:"700px",marginTop:"50px"},className:"btn btn-primary",onClick:this.handleNewEvent},"Neues Event"),e?r.a.createElement(p.a,{to:e}):""),r.a.createElement(I,null))}}]),n}(a.Component),Q=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/events/:id/:key",component:N}),r.a.createElement(p.b,{path:"/events/:id",component:N}),r.a.createElement(p.b,{path:"/404",component:D}),r.a.createElement(p.b,{exact:!0,path:"/",component:V}),r.a.createElement(p.b,{exact:!0,path:"/*"},r.a.createElement(p.a,{to:"/404"}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(120),n(121),n(122);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,null,r.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){e.exports=n(123)},70:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.7cb50eeb.chunk.js.map
(this.webpackJsonpquestionvotes=this.webpackJsonpquestionvotes||[]).push([[0],{39:function(e,t,a){e.exports=a(71)},44:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(36),s=a.n(o),c=a(18),i=(a(44),a(3)),u=a(4),l=a(6),m=a(5),d=a(1),p=a(14),v=a(25),h=a(11),f=a.n(h),b=a(17),j=a(20),y=a.n(j),O=a(15),g=a(37),E=a(21),q=a.n(E),w=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={question:{question:""},errors:{}},e.schema={question:q.a.string().min(3).max(512).required().label("Question")},e.joiSchema=q.a.object(e.schema),e.validate=function(){var t=e.joiSchema.validate(e.state.question,{abortEarly:!1});if(!t.error)return null;var a,n={},r=Object(g.a)(t.error.details);try{for(r.s();!(a=r.n()).done;){var o=a.value;n[o.path[0]]=o.message}}catch(s){r.e(s)}finally{r.f()}return n},e.validateProperty=function(t){var a=t.name,n=t.value,r=Object(O.a)({},a,n),o=Object(O.a)({},a,e.schema[a]),s=q.a.object(o).validate(r).error;return s?s.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();e.setState({errors:a||{}}),a||e.callServer()},e.callServer=function(){var t=e.state.question.question;e.props.onSubmit(t),e.setState({question:{question:""}})},e.handleChange=function(t){var a=t.currentTarget,n=Object(p.a)({},e.state.errors),r=e.validateProperty(a);r?n[a.name]=r:delete n[a.name];var o=Object(p.a)({},e.state.question);o[a.name]=a.value,e.setState({question:o,errors:n})},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{value:this.state.question.question,onChange:this.handleChange,type:"text",className:"form-control",name:"question",id:"frage","aria-describedby":"frageHilfe"}),this.state.errors.question&&r.a.createElement("div",{className:"alert alert-danger"},this.state.errors.question)),r.a.createElement("span",{className:"float left"},"Stell uns deine Frage"),r.a.createElement("button",{disabled:this.validate(),type:"submit",className:"btn btn-primary float-right",style:{width:"150px"}},"Senden"))))}}]),a}(n.Component),k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).renderIcon=function(e){return localStorage.getItem(e.id)?r.a.createElement("i",{className:"fa fa-heart"}):r.a.createElement("i",{className:"fa fa-heart-o"})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onVote;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",null,t.question),r.a.createElement("div",{className:"mx-auto",onClick:function(){return a(t)},style:{cursor:"pointer",maxWidth:"50px"}},this.renderIcon(t)," ",t.votes)))}}]),a}(n.Component),S=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.questions,a=e.onVote;return t.map((function(e){return r.a.createElement(k,{key:e.id,data:e,onVote:a})}))}}]),a}(n.Component),x=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={questions:[]},e.urlApi="https://api.originjump.com",e.getQuestions=Object(b.a)(f.a.mark((function t(){var a,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get(e.urlApi+"/questions/"+e.props.match.params.id);case 2:(a=t.sent).status&&200===a.status?((n=a.data).sort((function(e,t){return t.votes-e.votes})),e.setState({questions:n})):console.log("Die Fragen des Events konnten nicht geladen werden.");case 4:case"end":return t.stop()}}),t)}))),e.newQuestion=function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r,o,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,r={question:a,event_id:n},t.next=4,y.a.post(e.urlApi+"/questions",r);case 4:(o=t.sent).status&&200===o.status?(s=Object(v.a)(e.state.questions),r.id=o.data.insertId,r.votes=0,s.push(r),e.setState({questions:s})):console.log("Die Frage konnte nicht verarbeitet werden.");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.voteQuestion=function(){var t=Object(b.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.put(e.urlApi+"/questions/"+a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleVote=function(t){if(!localStorage.getItem(t.id)){var a=e.voteQuestion(t.id);if(!a.status||200===!a.status){var n=Object(v.a)(e.state.questions),r=n.indexOf(t);(t=Object(p.a)({},n[r])).votes++,n[r]=t,e.setState({questions:n}),localStorage.setItem(t.id,!0)}}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getQuestions(),setInterval(this.getQuestions,3e3);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.questions;return r.a.createElement("div",{className:"App"},r.a.createElement(w,{onSubmit:this.newQuestion}),r.a.createElement(S,{questions:e,onVote:this.handleVote}))}}]),a}(n.Component),N=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Veranstaltung verwalten"))}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{margin:"20px"}},"Not Found"))}}]),a}(n.Component),I=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={redirect:""},e.handleNewEvent=function(){var t=e.generateId();e.setState({redirect:"/events/"+t})},e.generateId=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,n=0;n<24;n++)e+=t.charAt(Math.floor(Math.random()*a));return e},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.redirect;return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("button",{style:{width:"700px",marginTop:"50px"},className:"btn btn-primary",onClick:this.handleNewEvent},"Neues Event"),e?r.a.createElement(d.a,{to:e}):"")}}]),a}(n.Component),A=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/events/:id",component:x}),r.a.createElement(d.b,{path:"/admin",component:N}),r.a.createElement(d.b,{path:"/404",component:C}),r.a.createElement(d.b,{path:"/",component:I}),r.a.createElement(d.b,{exact:!0,path:"/*"},r.a.createElement(d.a,{to:"/404"}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(68),a(69),a(70);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.c26d06bc.chunk.js.map